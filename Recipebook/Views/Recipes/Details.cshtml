@model Recipebook.Models.Recipe

@{
    ViewData["Title"] = "Recipe Details";
}

<div class="details-page position-relative">

    <div class="details-actions-top d-flex justify-content-between w-100">
        <a onclick="history.back()" class="btn btn-brown">
            <i class="bi bi-arrow-left-circle"></i>
        </a>

        <div class="d-flex gap-2">
            @if (User.Identity.IsAuthenticated &&
                        (User.Identity.Name == (string)ViewData["AuthorEmail"]))
            {
                <a asp-action="Edit" asp-route-id="@Model?.Id" class="btn btn-primary">
                    <i class="bi bi-pencil-square"></i>
                </a>
                <a asp-action="Delete" asp-route-id="@Model?.Id" class="btn btn-danger">
                    <i class="bi bi-trash"></i>
                </a>
            }
        </div>
    </div>

    <div class="details-header text-center mt-5">
        <h1 class="recipe-title">@Html.DisplayFor(model => model.Title)</h1>

        <div class="meta-info d-flex justify-content-center flex-wrap gap-3 mt-2">
            <div>
                @if (Model.CategoryRecipes != null && Model.CategoryRecipes.Any())
                {
                    @foreach (var cr in Model.CategoryRecipes)
                    {
                        <a asp-controller="Categories"
                           asp-action="Details"
                           asp-route-id="@cr.Category.Id"
                           class="badge bg-info text-dark text-decoration-none me-1">
                            @cr.Category.Name
                        </a>
                    }
                }
                else
                {
                    <span class="text-muted">No Categories</span>
                }
            </div>
        </div>

        <div class="author d-flex justify-content-center align-items-center gap-2">
            <span>
                By <a href="mailto:@ViewData["AuthorEmail"]">@ViewData["AuthorEmail"]</a>
            </span>
            <span class="badge @(Model.Private ? "bg-danger" : "bg-success")">
                @(Model.Private ? "Private" : "Public")
            </span>
        </div>
    </div>

    <div class="details-body mt-4">
        <h4 class="section-title mt-4">Description</h4>
        @if (!string.IsNullOrEmpty(Model.Description))
        {
            <p>@Html.DisplayFor(model => model.Description)</p>
        }
        else
        {
            <p class="text-muted">No description available.</p>
        }

        <h4 class="section-title mt-4">Directions</h4>
        <p>@Html.DisplayFor(model => model.Directions)</p>
    </div>
</div>